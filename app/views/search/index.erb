<html>
  <div class="row">
    <div class="col-md-4 col-md-offset-4">
      <div class="search-h1"> 
        <%= params[:user] %>'s
      </div>
      <div class="search-h2">
        <%= params[:repo] %>
      </div>
    </div>

    <div class="row">
      <div class="col-md-offset-3 col-md-2 ">
        <h4> Other language data:</h4>
        <% @repository.languages.each do |language,bytes| %>
            <p><%= language %>: <%= bytes %> bytes.</p>
        <% end %>
      </div>
      <div class="col-md-2">
        <h4>Birthday</h4>
        <p>Repo Created: <%= @repository.growthRate.repoTime %></p>
        <p>Repo Age: <%= @repository.growthRate.timeSince %> days</p>
      </div>
      <div class="col-md-2 ">
        <p><%= raw(buildContributors @repository.contributors) %></p>
        <p>(<%= @repository.contributors %> Contributors)</p>
      </div>
    </div>
    <div class="col-md-2">
      <p><%= raw(buildStars @repo.stars) %></p>
      <p>Star Count: <%= @repo.stars %></p>
    </div>
    <div class="col-md-2">
      <h3><%= @repo.growth_rate.round(2) %> stars per day</h3>
      <p style="padding-top: 30px"><%= raw(buildReadme @repo.readme) %></p>
    </div>
  </div>
  <hr width="70%" style="border-top: 2px solid gray">

    <hr width="70%" style="border-top: 2px solid gray">

    <div class="row">
      <div class="col-md-offset-3 col-md-4 ">
        <div class="chart">
            <% legend = {"position" => "top", "maxLines" => 5 } %>
            <%= pie_chart @repository.languages.each, library: {backgroundColor:"#ECF0F1", legend: legend, width: "100%"} %>    
        </div>
      </div>
      <div class="col-md-2 ">
        <h4>Popularity</h4>
        <%= raw(@repository.relativePopularity) %>
      </div>
    </div>

    <hr width="70%" style="border-top: 2px solid gray">

    <div class="row">
      <div class="col-md-offset-3 col-md-3 ">
        <h3><%= @repository.percentagePullsMerged %>% </h3>
        <p>Of pull requests are merged</p>
      </div>
      <div class="col-md-3">
        <p>Ratio of pull requests to issues: </p>
        <h3><%= @repository.pullsToIssuesRatio %></h3>
      </div>
    </div>

  <div class="col-md-4 col-md-offset-1">
    <h4> Contribution Statistics</h4>
    <p> Pull requests merged: <%= @repo.pulls_merged %>% </p>
    <p> Pull requests to issues: <%= pulls_to_issues(@repo.pulls_merged, @repo.issues) %> to 1</p>

    <p> Contributors: <%= @repo.contributors %> </p>

    <p> This is <%= params[:user]%>'s #<%= @repo.popularity %> repository </p>
  </div>

  <div >
    <div class="btn-group">
      <a href="/" type="button" class="btn btn-default btn-large"> Return to Homepage </a>
      <a href="?refresh=true" type="button" class="btn btn-default btn-large"> Reload Data </a>
    </div>
  </div>
</html>
